(()=>{"use strict";const e={fr:{"nav.services":"Services","nav.booking":"Réservation","nav.reviews":"Avis","nav.contact":"Contact","brand.title":"Voyages MVITA","hero.location":"Zanzibar, Tanzanie","hero.title":"Transferts & Excursions, esprit de Zanzibar","hero.lead":"Des eaux turquoises aux fermes d'épices, profitez de chauffeurs ponctuels, de véhicules confortables et d'expériences authentiques. Réservez en un clic sur WhatsApp.","badges.airport":"Aéroport ↔ Hôtel","badges.private":"Excursions privées","badges.whatsapp":"Support WhatsApp","services.title":"Nos services","cards.taxi.title":"Transferts & Taxi privé","cards.taxi.desc":"Aéroport ↔ Hôtel et voyages sur mesure. Chauffeurs professionnels, prix clairs. Disponible 24h/24 et 7j/7","cards.excursions.title":"Excursions","cards.excursions.desc":"Safari Blue, Prison Island, Stone Town, dhow au coucher du soleil et plus encore.","cards.spice.title":"Spice Tour","cards.spice.desc":"Visitez les fermes d’épices, dégustez et découvrez l’héritage swahili.","booking.title":"Réservation rapide","booking.lead":"Complétez le formulaire : votre message est prêt pour WhatsApp.","form.service":"Service","form.date":"Date","form.time":"Heure","form.passengers":"Passagers","form.pickup":"Départ","form.dropoff":"Destination","form.notes":"Notes","form.confirm":"Confirmer","form.whatsapp":"WhatsApp","form.opt.transfer":"Transfert Aéroport","form.opt.taxi":"Taxi privé","form.opt.safari":"Safari Blue","form.opt.prison":"Prison Island","form.opt.stone":"Stone Town","form.opt.spice":"Spice Tour","reviews.title":"Avis clients","reviews.leave":"Laisser un avis","reviews.note":"Note","reviews.name":"Nom","reviews.comment":"Commentaire","reviews.send":"Envoyer l’avis","footer.location":"Zanzibar, Tanzanie","js.alert.required":"Veuillez remplir tous les champs obligatoires.","js.review.missing":"Veuillez saisir un nom, un commentaire, et une note valide.","js.review.thanks":"Merci pour votre avis !","wa.message.header":"Bonjour MVITA Travels !","wa.message.labels.service":"Service","wa.message.labels.date":"Date","wa.message.labels.time":"Heure","wa.message.labels.pickup":"Départ","wa.message.labels.dropoff":"Destination","wa.message.labels.passengers":"Passagers","wa.message.labels.notes":"Notes","wa.message.thanks":"Merci !"},en:{"nav.services":"Services","nav.booking":"Booking","nav.reviews":"Reviews","nav.contact":"Contact","brand.title":"MVITA Travels","hero.location":"Zanzibar, Tanzania","hero.title":"Transfers & Excursions, Zanzibar spirit","hero.lead":"From turquoise waters to spice farms, enjoy punctual drivers, comfortable vehicles and authentic experiences. Book in one click on WhatsApp.","badges.airport":"Airport ↔ Hotel","badges.private":"Private tours","badges.whatsapp":"WhatsApp support","services.title":"Our services","cards.taxi.title":"Transfers & Private Taxi","cards.taxi.desc":"Airport ↔ Hotel and custom rides. Professional drivers, clear prices. Available 24/7","cards.excursions.title":"Excursions","cards.excursions.desc":"Safari Blue, Prison Island, Stone Town, sunset dhow and more.","cards.spice.title":"Spice Tour","cards.spice.desc":"Visit spice farms, taste and discover Swahili heritage.","booking.title":"Quick booking","booking.lead":"Fill in the form: your message is ready for WhatsApp.","form.service":"Service","form.date":"Date","form.time":"Time","form.passengers":"Passengers","form.pickup":"Pickup","form.dropoff":"Dropoff","form.notes":"Notes","form.confirm":"Confirm","form.whatsapp":"WhatsApp","form.opt.transfer":"Airport Transfer","form.opt.taxi":"Private Taxi","form.opt.safari":"Safari Blue","form.opt.prison":"Prison Island","form.opt.stone":"Stone Town","form.opt.spice":"Spice Tour","reviews.title":"Customer reviews","reviews.leave":"Leave a review","reviews.note":"Rating","reviews.name":"Name","reviews.comment":"Comment","reviews.send":"Send review","footer.location":"Zanzibar, Tanzania","js.alert.required":"Please fill all required fields.","js.review.missing":"Please enter a name, a comment, and a valid rating.","js.review.thanks":"Thanks for your review!","wa.message.header":"Hello MVITA Travels!","wa.message.labels.service":"Service","wa.message.labels.date":"Date","wa.message.labels.time":"Time","wa.message.labels.pickup":"Pickup","wa.message.labels.dropoff":"Dropoff","wa.message.labels.passengers":"Passengers","wa.message.labels.notes":"Notes","wa.message.thanks":"Thanks!"},es:{"nav.services":"Servicios","nav.booking":"Reserva","nav.reviews":"Opiniones","nav.contact":"Contacto","brand.title":"MVITA Travels","hero.location":"Zanzíbar, Tanzania","hero.title":"Traslados y Excursiones, espíritu de Zanzíbar","hero.lead":"Desde aguas turquesas hasta granjas de especias, disfrute de conductores puntuales, vehículos cómodos y experiencias auténticas. Reserve en un clic por WhatsApp.","badges.airport":"Aeropuerto ↔ Hotel","badges.private":"Excursiones privadas","badges.whatsapp":"Soporte por WhatsApp","services.title":"Nuestros servicios","cards.taxi.title":"Traslados y Taxi privado","cards.taxi.desc":"Aeropuerto ↔ Hotel y viajes a medida. Conductores profesionales, precios claros. Disponible 24/7","cards.excursions.title":"Excursiones","cards.excursions.desc":"Safari Blue, Prison Island, Stone Town, dhow al atardecer y más.","cards.spice.title":"Spice Tour","cards.spice.desc":"Visite granjas de especias, pruebe y descubra el patrimonio suajili.","booking.title":"Reserva rápida","booking.lead":"Complete el formulario: su mensaje está listo para WhatsApp.","form.service":"Servicio","form.date":"Fecha","form.time":"Hora","form.passengers":"Pasajeros","form.pickup":"Salida","form.dropoff":"Destino","form.notes":"Notas","form.confirm":"Confirmar","form.whatsapp":"WhatsApp","form.opt.transfer":"Traslado Aeropuerto","form.opt.taxi":"Taxi privado","form.opt.safari":"Safari Blue","form.opt.prison":"Prison Island","form.opt.stone":"Stone Town","form.opt.spice":"Spice Tour","reviews.title":"Opiniones de clientes","reviews.leave":"Dejar una opinión","reviews.note":"Nota","reviews.name":"Nombre","reviews.comment":"Comentario","reviews.send":"Enviar opinión","footer.location":"Zanzíbar, Tanzania","js.alert.required":"Complete todos los campos obligatorios.","js.review.missing":"Ingrese un nombre, un comentario y una nota válida.","js.review.thanks":"¡Gracias por su opinión!","wa.message.header":"¡Hola MVITA Travels!","wa.message.labels.service":"Servicio","wa.message.labels.date":"Fecha","wa.message.labels.time":"Hora","wa.message.labels.pickup":"Salida","wa.message.labels.dropoff":"Destino","wa.message.labels.passengers":"Pasajeros","wa.message.labels.notes":"Notas","wa.message.thanks":"¡Gracias!"}},t="mvita-lang";function n(){return localStorage.getItem(t)||document.documentElement.lang||"fr"}function o(e){localStorage.setItem(t,e),document.documentElement.lang=e}function a(t){const o=n();return e[o]&&e[o][t]||e.fr&&e.fr[t]||t}function i(){try{console.log("[i18n] apply start, lang=",n());document.querySelectorAll("[data-i18n]").forEach((e=>{const t=e.getAttribute("data-i18n"),n=a(t);n&&n!==t||console.warn("[i18n] missing key:",t),e.textContent=n}));const e={"form.opt.transfer":"#service option:nth-child(1)","form.opt.taxi":"#service option:nth-child(2)","form.opt.safari":"#service option:nth-child(3)","form.opt.prison":"#service option:nth-child(4)","form.opt.stone":"#service option:nth-child(5)","form.opt.spice":"#service option:nth-child(6)"};for(const[t,n]of Object.entries(e)){const e=document.querySelector(n);e&&(e.textContent=a(t))}window.updateWaLink&&"function"==typeof window.updateWaLink&&(console.log("[i18n] calling updateWaLink"),window.updateWaLink()),console.log("[i18n] apply done")}catch(e){console.error("[i18n] apply error:",e)}}window.__t=a,document.addEventListener("DOMContentLoaded",(()=>{try{console.log("[init] DOMContentLoaded");const e=document.getElementById("lang"),t=n();e&&(e.value=t,e.addEventListener("change",(()=>{console.log("[lang] change ->",e.value),o(e.value),i(),window.renderReviews&&"function"==typeof window.renderReviews&&(console.log("[lang] rerender reviews"),window.renderReviews())}))),o(t),i();const a=document.getElementById("year");a&&!a.textContent&&(a.textContent=(new Date).getFullYear())}catch(e){console.error("[init] error:",e)}})),function(){const e=document.getElementById("booking-form"),t=document.getElementById("wa-link"),n="255773543109";if(!e||!t)return void console.warn("[wa] form or link not found");function o(){const n=e.service?.value||"",o=e.date?.value||"",i=e.time?.value||"",r=e.pickup?.value||"",c=e.dropoff?.value||"",l=e.passengers?.value||"",s=e.notes?.value||"",d=[__t("wa.message.header"),${__t("wa.message.labels.service")}: ${n},${__t("wa.message.labels.date")}: ${o},${__t("wa.message.labels.time")}: ${i},${__t("wa.message.labels.pickup")}: ${r},${__t("wa.message.labels.dropoff")}: ${c},${__t("wa.message.labels.passengers")}: ${l}];return s&&s.trim()&&d.push(${__t("wa.message.labels.notes")}: ${s.trim()}),d.push(__t("wa.message.thanks")),d.join("\n")}window.updateWaLink=function(){try{const e=encodeURIComponent(o());t.href=https://wa.me/${n}?text=${e},console.log("[wa] link updated:",t.href)}catch(e){console.error("[wa] update error:",e)}},window.updateWaLink(),e.addEventListener("input",window.updateWaLink),e.addEventListener("submit",(t=>{t.preventDefault();const n=e.service.value&&e.date.value&&e.time.value&&e.pickup.value&&e.dropoff.value;n?(window.updateWaLink(),console.log("[wa] open link"),window.open(t.href,"_blank","noopener")):alert(__t("js.alert.required"))}))}(),function(){const e=document.getElementById("reviews-list"),t=document.getElementById("review-form"),n=document.getElementById("rating-value");if(!e||!t||!n)return void console.warn("[reviews] elements not found");const o="mvita-reviews-v1";function a(){try{return JSON.parse(localStorage.getItem(o))||[]}catch(e){return console.warn("[reviews] parse error:",e),[]}}function r(e){localStorage.setItem(o,JSON.stringify(e))}window.renderReviews=function(){try{const t=a();if(e.innerHTML="",0===t.length){const t=document.createElement("p");return t.className="muted",t.textContent="—",void e.appendChild(t)}t.forEach((t=>{const o=document.createElement("div");o.className="review";const a="★".repeat(t.rating)+"☆".repeat(5-t.rating),r=new Date(t.date),c=document.documentElement.lang||"fr",l=r.toLocaleDateString(c,{year:"numeric",month:"short",day:"numeric"});o.innerHTML=\n        <div><strong>${t.name}</strong> <span class="stars">${a}</span></div>\n        <div class="meta">${l}</div>\n        <p>${t.comment}</p>\n      ,e.appendChild(o)})),console.log("[reviews] rendered:",t.length)}catch(t){console.error("[reviews] render error:",t)}},document.querySelectorAll(".stars-input button").forEach((e=>{e.addEventListener("click",(()=>{const t=Number(e.dataset.value||"5");n.value=String(t),document.querySelectorAll(".stars-input button").forEach((e=>e.classList.toggle("active",e===this)))}))})),t.addEventListener("submit",(e=>{e.preventDefault();const o=t.name.value.trim(),i=t.comment.value.trim(),c=Number(n.value||"5");if(!o||!i||c<1)return void alert(__t("js.review.missing"));const l=a();l.unshift({name:o,comment:i,rating:c,date:(new Date).toISOString()}),r(l),t.reset(),n.value="5",document.querySelectorAll(".stars-input button").forEach((e=>e.classList.remove("active"))),window.renderReviews(),alert(__t("js.review.thanks"))})),window.renderReviews()}();})();